{% extends "base.njk" %}

{% block content %}
<div class="page-header">
    <h1>{{ module.name }}</h1>
    <p class="module-type">Module</p>
</div>

{% if module.rawDocumentation %}
<div class="section">
    <div class="type-description">{{ module.rawDocumentation | markdown | safe }}</div>
</div>
{% endif %}

<div class="section">
    <h2>Types</h2>
    {% if typeDefinitions.length > 0 %}
        <p>This module provides the following types:</p>
        <ul class="type-list">
        {% for typeDef in typeDefinitions %}
            <li>
                <a href="{{ typeDef.name | replace('API', '') }}.html" class="type-link">{{ typeDef.name | replace('API', '') }}</a>
            </li>
        {% endfor %}
        </ul>
    {% else %}
        <p>This module does not provide any types.</p>
    {% endif %}

    <h2>Properties</h2>
    {% if module.properties and module.properties.length > 0 %}
        {% for prop in module.properties %}
        <div class="property" id="{{ prop.name }}">
            <h3>{{ module.name }}.{{ prop.name }}</h3>
            <p class="type">{{ prop.signature | extractPropertyType | formatType }}</p>
            <p class="description">{{ prop.description }}</p>
            {% if prop | githubSourceUrl %}
            <p class="source-link">
                <a href="{{ prop | githubSourceUrl }}" target="_blank" rel="noopener noreferrer">
                    View source on GitHub
                </a>
            </p>
            {% endif %}
        </div>
        {% endfor %}
    {% else %}
        <p>This module has no properties.</p>
    {% endif %}

    <h2>Methods</h2>
    {% if methods.length > 0 %}
        {% for method in methods %}
        <div class="method" id="{{ method.name }}">
            <!-- <h3>{{ module.name }}.{{ method.name }}({% for param in method.params %}{{ param.name }}{% if not loop.last %}, {% endif %}{% endfor %}) -> {% if method.returns %}{{ method.returns.type}}{% else %}None{% endif %}</h3> -->
            <a id="{{ method.name }}"></a>
            <h3><a href="#{{ method.name}}">{{ module.name }}.{{ method.name }}</a></h3>
            <p class="description">{{ method.description }}</p>
            {% if method | githubSourceUrl %}
            <p class="source-link">
                <a href="{{ method | githubSourceUrl }}" target="_blank" rel="noopener noreferrer">
                    View source on GitHub
                </a>
            </p>
            {% endif %}
            <hr />
            <h4>Declaration</h4>
            <pre><code class="language-javascript">{{ module.name }}.{{ method.name }}({% for param in method.params %}{{ param.name }}{% if not loop.last %}, {% endif %}{% endfor %}) -> {% if method.returns %}{{ method.returns.type}}{% else %}None{% endif %}</code></pre>

            <h4>Parameters</h4>
            {% if method.params.length > 0 %}
            <ul class="params">
                {% for param in method.params %}
                <li>
                    <code>{{ param.name }}</code>
                    <span class="type">{{ param.type | formatType }}</span>
                    <p class="param-desc">{{ param.description }}</p>
                </li>
                {% endfor %}
            </ul>
            {% else %}
            <p>None</p>
            {% endif %}

            <h4>Return Value</h4>
            {% if method.returns %}
            <p>
                <!-- <span class="type">{{ method.returns.type | formatType }}</span> - -->
                {{ method.returns.description }}
            </p>
            {% else %}
            <p>None</p>
            {% endif %}
        </div>
        {% endfor %}
    {% else %}
        <p>This module has no methods.</p>
    {% endif %}
</div>
{% endblock %}
